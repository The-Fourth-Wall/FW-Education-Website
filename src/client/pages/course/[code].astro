---
import {parse_curriculum} from "@app/01-curriculum-parser";
import {read_file} from "@app/02-read-file";
import type {Course} from "@models/course.model";
import CourseHeader from "@organisms/CourseHeader.astro";
import CourseSection from "@organisms/CourseSection.astro";
import Layout from "@templates/Layout.astro";

export function getStaticPaths() {
  const courses = parse_curriculum(read_file("curriculum.md"));
  return courses.map(course => ({
    params: {code: course.code},
    props: {course},
  }));
}

type Props = {course: Course};
const {course} = Astro.props;
---

<Layout title={`${course.name} - Fourth Wall Education`}>
  <CourseHeader course={course} />

  <CourseSection section_title="Technical Focus" items={course.programming} />
  <CourseSection
    section_title="What You'll Learn"
    items={course.topics.map(topic => topic.name)}
  />
  <CourseSection
    section_title="Further Reading & Resources"
    items={course.references}
  />
</Layout>
